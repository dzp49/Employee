import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Vaccination, VaccinationResponse } from './vaccination';
import { BehaviorSubject, map, Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class VaccinationService {

  apiUrl='http://127.0.0.1:5000/vaccinationList'
  vaccinations: Vaccination[] = [];
  public addAppointments: Vaccination={
    StartTime: '',
    EndTime: ''
  };
  constructor(private http:HttpClient) { }

  public getAppointments(): Observable<Vaccination[]> {
    return this.http.get<VaccinationResponse>(`${this.apiUrl}`).pipe(map(response => response.vaccination));
  }

  public addAppointment(vaccination: Vaccination): Observable<Vaccination> {
    return this.http.post<Vaccination>(`${this.apiUrl}`, vaccination);
  }

  public updateAppointment(vaccination: Vaccination, id: number): Observable<Vaccination> {
    return this.http.put<Vaccination>(`${this.apiUrl}/update/${id}`, vaccination);
  }

  public deleteAppointment(id: number): Observable<void> {
    return this.http.delete<void>(`${this.apiUrl}/delete/${id}`);
  }

}
